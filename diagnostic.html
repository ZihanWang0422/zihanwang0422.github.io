<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>è¿”å›é¡¶éƒ¨æŒ‰é’®è¯Šæ–­</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        
        .diagnostic-panel {
            position: fixed;
            top: 10px;
            left: 10px;
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            max-width: 300px;
        }
        
        .status {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }
        
        .status.good { background: #d4edda; color: #155724; }
        .status.bad { background: #f8d7da; color: #721c24; }
        .status.warning { background: #fff3cd; color: #856404; }
        
        .content {
            height: 1500px;
            background: linear-gradient(to bottom, #e3f2fd, #bbdefb);
            margin: 20px;
            padding: 20px;
            border-radius: 8px;
        }
        
        /* è¿”å›é¡¶éƒ¨æŒ‰é’® - å®Œå…¨ç›¸åŒçš„æ ·å¼ */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .test-buttons {
            margin: 10px 0;
        }
        
        .test-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            margin: 2px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .test-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="diagnostic-panel">
        <h3>ğŸ” è¿”å›é¡¶éƒ¨æŒ‰é’®è¯Šæ–­</h3>
        
        <div id="buttonExists" class="status">æ£€æŸ¥æŒ‰é’®å…ƒç´ ...</div>
        <div id="fontAwesome" class="status">æ£€æŸ¥Font Awesome...</div>
        <div id="scrollPosition" class="status">æ»šåŠ¨ä½ç½®: 0px</div>
        <div id="buttonStatus" class="status">æŒ‰é’®çŠ¶æ€: æ£€æŸ¥ä¸­...</div>
        
        <div class="test-buttons">
            <button class="test-btn" onclick="forceShowButton()">å¼ºåˆ¶æ˜¾ç¤º</button>
            <button class="test-btn" onclick="testScroll()">æµ‹è¯•æ»šåŠ¨</button>
            <button class="test-btn" onclick="inspectButton()">æ£€æŸ¥å…ƒç´ </button>
        </div>
        
        <small>åˆ·æ–°é¡µé¢é‡æ–°æ£€æµ‹</small>
    </div>
    
    <div class="content">
        <h1>è¯Šæ–­é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨æ¥è¯Šæ–­è¿”å›é¡¶éƒ¨æŒ‰é’®çš„é—®é¢˜ã€‚</p>
        
        <h2>æ£€æŸ¥åˆ—è¡¨:</h2>
        <ol>
            <li>æŒ‰é’®HTMLå…ƒç´ æ˜¯å¦å­˜åœ¨</li>
            <li>Font Awesomeå›¾æ ‡åº“æ˜¯å¦åŠ è½½</li>
            <li>CSSæ ·å¼æ˜¯å¦æ­£ç¡®åº”ç”¨</li>
            <li>JavaScriptäº‹ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ</li>
        </ol>
        
        <p>å‘ä¸‹æ»šåŠ¨è¶…è¿‡100pxï¼ŒæŒ‰é’®åº”è¯¥è‡ªåŠ¨æ˜¾ç¤ºã€‚</p>
        
        <h2>æ‰‹åŠ¨æµ‹è¯•</h2>
        <p>ä½¿ç”¨å·¦ä¸Šè§’çš„è¯Šæ–­é¢æ¿ä¸­çš„æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚</p>
        
        <div style="height: 500px; background: rgba(0,0,0,0.1); margin: 20px 0; padding: 20px;">
            <h3>ç»§ç»­æ»šåŠ¨...</h3>
            <p>å½“æ»šåŠ¨ä½ç½®è¶…è¿‡100pxæ—¶ï¼Œå³ä¸‹è§’åº”è¯¥å‡ºç°ç´«è‰²æ¸å˜çš„åœ†å½¢æŒ‰é’®ã€‚</p>
        </div>
        
        <div style="height: 500px; background: rgba(0,0,0,0.05); margin: 20px 0; padding: 20px;">
            <h3>æ›´å¤šå†…å®¹</h3>
            <p>å¦‚æœæŒ‰é’®è¿˜æ˜¯ä¸æ˜¾ç¤ºï¼Œè¯·æŸ¥çœ‹å·¦ä¸Šè§’çš„è¯Šæ–­ä¿¡æ¯ã€‚</p>
        </div>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop">
        <i class="fa fa-arrow-up"></i>
    </button>

    <script>
        let backToTopButton;
        
        document.addEventListener('DOMContentLoaded', function() {
            backToTopButton = document.getElementById('backToTop');
            
            // æ£€æŸ¥æŒ‰é’®æ˜¯å¦å­˜åœ¨
            const buttonExistsEl = document.getElementById('buttonExists');
            if (backToTopButton) {
                buttonExistsEl.textContent = 'âœ… æŒ‰é’®å…ƒç´ å­˜åœ¨';
                buttonExistsEl.className = 'status good';
            } else {
                buttonExistsEl.textContent = 'âŒ æŒ‰é’®å…ƒç´ ä¸å­˜åœ¨';
                buttonExistsEl.className = 'status bad';
                return;
            }
            
            // æ£€æŸ¥Font Awesome
            const fontAwesomeEl = document.getElementById('fontAwesome');
            const testIcon = document.createElement('i');
            testIcon.className = 'fa fa-arrow-up';
            testIcon.style.visibility = 'hidden';
            document.body.appendChild(testIcon);
            
            setTimeout(() => {
                const computedStyle = window.getComputedStyle(testIcon);
                if (computedStyle.fontFamily.includes('FontAwesome') || 
                    computedStyle.fontFamily.includes('Font Awesome')) {
                    fontAwesomeEl.textContent = 'âœ… Font Awesomeå·²åŠ è½½';
                    fontAwesomeEl.className = 'status good';
                } else {
                    fontAwesomeEl.textContent = 'âš ï¸ Font Awesomeå¯èƒ½æœªåŠ è½½';
                    fontAwesomeEl.className = 'status warning';
                }
                document.body.removeChild(testIcon);
            }, 100);
            
            // æ»šåŠ¨äº‹ä»¶ç›‘å¬
            function updateStatus() {
                const scrollPos = window.pageYOffset;
                const scrollEl = document.getElementById('scrollPosition');
                const statusEl = document.getElementById('buttonStatus');
                
                scrollEl.textContent = `æ»šåŠ¨ä½ç½®: ${scrollPos}px`;
                
                if (scrollPos > 100) {
                    backToTopButton.classList.add('show');
                    statusEl.textContent = 'âœ… æŒ‰é’®åº”è¯¥æ˜¾ç¤º';
                    statusEl.className = 'status good';
                } else {
                    backToTopButton.classList.remove('show');
                    statusEl.textContent = 'â¸ï¸ æŒ‰é’®éšè—ï¼ˆæ»šåŠ¨<100pxï¼‰';
                    statusEl.className = 'status warning';
                }
            }
            
            window.addEventListener('scroll', updateStatus);
            updateStatus();
            
            // ç‚¹å‡»äº‹ä»¶
            backToTopButton.addEventListener('click', function() {
                console.log('è¿”å›é¡¶éƒ¨æŒ‰é’®è¢«ç‚¹å‡»');
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
        
        // æµ‹è¯•å‡½æ•°
        function forceShowButton() {
            if (backToTopButton) {
                backToTopButton.style.opacity = '1';
                backToTopButton.style.visibility = 'visible';
                backToTopButton.style.transform = 'translateY(0)';
                backToTopButton.style.background = 'red';
                alert('æŒ‰é’®å·²å¼ºåˆ¶æ˜¾ç¤ºï¼ˆçº¢è‰²ï¼‰ã€‚å¦‚æœä½ çœ‹ä¸åˆ°ï¼Œè¯´æ˜æœ‰CSSå†²çªæˆ–å…¶ä»–é—®é¢˜ã€‚');
            }
        }
        
        function testScroll() {
            window.scrollTo({ top: 200, behavior: 'smooth' });
            setTimeout(() => {
                alert('å·²æ»šåŠ¨åˆ°200pxä½ç½®ï¼ŒæŒ‰é’®åº”è¯¥æ˜¾ç¤º');
            }, 500);
        }
        
        function inspectButton() {
            if (backToTopButton) {
                const rect = backToTopButton.getBoundingClientRect();
                const styles = window.getComputedStyle(backToTopButton);
                const info = `
æŒ‰é’®ä½ç½®: ${rect.left}px, ${rect.top}px
æŒ‰é’®å¤§å°: ${rect.width}px Ã— ${rect.height}px
é€æ˜åº¦: ${styles.opacity}
å¯è§æ€§: ${styles.visibility}
å±‚çº§: ${styles.zIndex}
ä½ç½®: ${styles.position}
                `.trim();
                alert(info);
                console.log('æŒ‰é’®è¯¦ç»†ä¿¡æ¯:', {
                    element: backToTopButton,
                    rect: rect,
                    styles: styles
                });
            }
        }
    </script>
</body>
</html>
